<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Discord ClockIn</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="app">
      <header class="site-header">
        <div class="brand">
          <span class="brand__icon">⏱️</span>
          <div>
            <p class="brand__eyebrow">Discord ClockIn</p>
            <h1 class="brand__title">Team time tracking</h1>
          </div>
        </div>
        <nav class="main-nav" aria-label="Primary">
          <button class="main-nav__link is-active" data-view-button="home">
            Home
          </button>
          <button
            class="main-nav__link"
            data-view-button="my-time"
            data-requires-auth="true"
          >
            My time
          </button>
          <button
            class="main-nav__link"
            data-view-button="admin"
            data-requires-role="admin"
          >
            Admin
          </button>
        </nav>
        <div class="header-actions">
          <div class="connection-status">
            <span class="sr-only">Backend status:</span>
            <span id="connection-indicator" class="status-pill status-pill--error"
              >Connecting…</span
            >
          </div>
          <div class="auth-controls">
            <button id="login-button" class="button button--primary">
              Login with Discord
            </button>
            <div id="user-summary" class="user-summary" hidden>
              <img id="user-avatar" alt="" class="user-summary__avatar" />
              <div>
                <p id="user-name" class="user-summary__name"></p>
                <p id="user-roles" class="user-summary__roles"></p>
              </div>
              <button id="logout-button" class="button button--ghost">
                Sign out
              </button>
            </div>
          </div>
        </div>
      </header>

      <main class="main-content">
        <section class="view view--active" data-view="home">
          <div class="hero">
            <h2>Welcome to the ClockIn portal</h2>
            <p>
              Track your day, request time off, and keep your team informed – all
              in one place.
            </p>
            <div class="hero__actions">
              <button class="button button--primary" data-hero-action="login">
                Get started
              </button>
              <button class="button button--ghost" data-view-jump="my-time">
                View my time
              </button>
            </div>
          </div>
          <div class="home-grid">
            <article class="panel">
              <h3>How it works</h3>
              <ol class="steps">
                <li>Connect with Discord to verify your identity.</li>
                <li>Clock in and out as you begin and end work.</li>
                <li>Submit holiday requests directly to your managers.</li>
                <li>Admins review, approve, and keep everyone on track.</li>
              </ol>
            </article>
            <article class="panel">
              <h3>Why teams choose ClockIn</h3>
              <ul class="benefits">
                <li>Clear visibility into active shifts and attendance.</li>
                <li>Automated timesheets ready for export.</li>
                <li>Role-based access so everyone sees the right tools.</li>
                <li>Holiday approval flows that keep communication in Discord.</li>
              </ul>
            </article>
          </div>
        </section>

        <section class="view" data-view="my-time" data-requires-auth="true">
          <header class="view-header">
            <h2>My time</h2>
            <p>Stay on top of your current shift and recent activity.</p>
          </header>

          <article class="panel">
            <div class="panel__header">
              <h3>Shift controls</h3>
              <span id="clock-state" class="status-pill status-pill--idle"
                >Waiting</span
              >
            </div>
            <p id="clock-message" class="muted">
              Connect to the backend and sign in to see your current status.
            </p>
            <div class="clock-controls">
              <button id="clock-in" class="button button--primary">
                Clock in
              </button>
              <button id="clock-out" class="button button--danger">
                Clock out
              </button>
            </div>
          </article>

          <article class="panel">
            <div class="panel__header">
              <h3>Recent shifts</h3>
              <button id="refresh-my-time" class="button button--ghost">
                Refresh
              </button>
            </div>
            <div class="table-wrapper">
              <table class="data-table">
                <thead>
                  <tr>
                    <th scope="col">Start</th>
                    <th scope="col">End</th>
                    <th scope="col">Duration</th>
                    <th scope="col">Status</th>
                  </tr>
                </thead>
                <tbody id="my-time-entries">
                  <tr>
                    <td colspan="4" class="muted">No shifts to display.</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </article>

          <article class="panel">
            <div class="panel__header">
              <h3>Holiday requests</h3>
              <button id="refresh-holidays" class="button button--ghost">
                Refresh
              </button>
            </div>
            <form id="holiday-form" class="form-grid">
              <label>
                Start date
                <input type="date" name="startDate" required />
              </label>
              <label>
                End date
                <input type="date" name="endDate" required />
              </label>
              <label class="form-grid__full">
                Reason
                <textarea
                  name="reason"
                  rows="3"
                  placeholder="Let your manager know what you need"
                ></textarea>
              </label>
              <button type="submit" class="button button--primary">
                Request holiday
              </button>
            </form>
            <ul id="holiday-list" class="timeline">
              <li class="timeline__item muted">No holiday requests yet.</li>
            </ul>
          </article>
        </section>

        <section class="view" data-view="admin" data-requires-role="admin">
          <header class="view-header">
            <h2>Admin workspace</h2>
            <p>Review timesheets, handle time off, and manage team roles.</p>
          </header>

          <article class="panel">
            <div class="panel__header">
              <h3>Review team timesheets</h3>
              <button id="refresh-admin-timesheets" class="button button--ghost">
                Refresh
              </button>
            </div>
            <form id="admin-timesheet-form" class="form-grid">
              <label>
                Member ID
                <input name="memberId" placeholder="Discord ID" />
              </label>
              <label>
                From
                <input type="date" name="from" />
              </label>
              <label>
                To
                <input type="date" name="to" />
              </label>
              <button type="submit" class="button button--primary">
                Fetch timesheets
              </button>
            </form>
            <div class="table-wrapper">
              <table class="data-table">
                <thead>
                  <tr>
                    <th scope="col">Member</th>
                    <th scope="col">Start</th>
                    <th scope="col">End</th>
                    <th scope="col">Duration</th>
                    <th scope="col">Notes</th>
                  </tr>
                </thead>
                <tbody id="admin-timesheet-rows">
                  <tr>
                    <td colspan="5" class="muted">
                      Submit a search to view entries.
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </article>

          <article class="panel">
            <h3>Modify logged hours</h3>
            <form id="admin-modify-hours-form" class="form-grid">
              <label>
                Entry ID
                <input name="entryId" placeholder="Timesheet entry ID" required />
              </label>
              <label>
                New start
                <input type="datetime-local" name="start" />
              </label>
              <label>
                New end
                <input type="datetime-local" name="end" />
              </label>
              <label>
                Notes
                <input name="notes" placeholder="Adjustment reason" />
              </label>
              <button type="submit" class="button button--primary">
                Update entry
              </button>
            </form>
          </article>

          <article class="panel">
            <div class="panel__header">
              <h3>Holiday approvals</h3>
              <button id="refresh-admin-holidays" class="button button--ghost">
                Refresh
              </button>
            </div>
            <ul id="admin-holiday-requests" class="timeline">
              <li class="timeline__item muted">No pending requests.</li>
            </ul>
            <form id="admin-holiday-form" class="form-grid">
              <label>
                Request ID
                <input name="requestId" placeholder="Holiday request ID" required />
              </label>
              <label>
                Action
                <select name="status" required>
                  <option value="approved">Approve</option>
                  <option value="denied">Deny</option>
                </select>
              </label>
              <label class="form-grid__full">
                Manager note
                <textarea name="managerNote" rows="2"></textarea>
              </label>
              <button type="submit" class="button button--primary">
                Submit decision
              </button>
            </form>
          </article>

          <article class="panel">
            <h3>Role management</h3>
            <form id="admin-role-form" class="form-grid">
              <label>
                Member ID
                <input name="memberId" placeholder="Discord ID" required />
              </label>
              <label>
                Roles
                <input
                  name="roles"
                  placeholder="comma,separated,roles"
                  required
                />
              </label>
              <label>
                Action
                <select name="action" required>
                  <option value="set">Replace existing</option>
                  <option value="add">Add roles</option>
                  <option value="remove">Remove roles</option>
                </select>
              </label>
              <button type="submit" class="button button--primary">
                Update roles
              </button>
            </form>
          </article>
        </section>
      </main>
    </div>

    <div id="notifications" class="notifications" aria-live="polite"></div>

    <script src="config.js"></script>
    <script src="app.js"></script>
  </body>
</html>
